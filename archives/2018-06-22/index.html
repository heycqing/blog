<!DOCTYPE HTML>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>用一杯奶茶钱和8分钟时间教你看墙外的世界 | Cqing 博客</title>

  
  <meta name="author" content="Cqing">
  

  
  <meta name="description" content="一、简述富强、民主、文明、和谐自由、平等、公正、法治爱国、敬业、诚信、友善">
  

  
  <meta name="keywords" content="heycqing,cqing,伍思卿,前端学习,北京理工大学珠海学院，wusiqingss">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="用一杯奶茶钱和8分钟时间教你看墙外的世界">

  <meta property="og:site_name" content="Cqing 博客">

  
  <meta property="og:image" content="/favicon.ico">
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Cqing 博客" type="application/atom+xml">
  <link rel="stylesheet" href="/blog/css/style.css" media="screen" type="text/css">
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-129505375-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-129505375-1');
  </script>
  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?1089516899016647991a2880ca17adff";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>
</head>


<body>
<div class="blog">
  <div class="content">

    <header id="cqing-header">
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">Cqing 博客</a>
    </h1>
    <p class="site-description"></p>
  </div>
  <nav class="site-navigation">
    <ul>
      
         <!-- <li><a href="/">主页</a></li> -->
      
        <li><a href="/blog/archives">我的文章</a></li>
      
        <!-- <li><a href="/categories">文章分类</a></li> -->
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>用一杯奶茶钱和8分钟时间教你看墙外的世界</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/blog/archives/2018-06-22/" rel="bookmark">
        <time class="entry-date published" datetime="2018-06-21T17:17:36.000Z">
          2018-06-22
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <h2 id="一、简述"><a href="#一、简述" class="headerlink" title="一、简述"></a>一、简述</h2><p>富强、民主、文明、和谐<br>自由、平等、公正、法治<br>爱国、敬业、诚信、友善<br><a id="more"></a><br>老习惯，做一下简单的简述说说自己写着一篇文章的原因。<br>之前有用免费的vpn服务，浏览一下网页还行的，但是就不太稳定，而且还经常断，好吧，就是蓝灯的普通用户每个月也只有500m的流量，一晃就没了。十分不友好（天下没有免费的午餐）</p>
<ul>
<li>原因一：正好碰上我这段时间vpn失效了，好自己去搭建一个VPN服务，供给自己或者家里人使用；         </li>
<li>原因二：百度一下，太多水文，不太推荐使用百度，谷歌一下是最好的途径，毕竟是墙外的世界；         </li>
<li>原因三：身边也有太多的朋友缺少vpn这种东西，或者只能很多人都用同一个VPS服务器的线路，无疑是很多人挤在一起，并不太好；相反，写这篇文章的更多原因是促使一下身边有编程基础的人也可以自己花一杯奶茶钱去搭建1、2个月的服务，体验好了，可以再去续费。</li>
</ul>
<p><strong>（当然编程小白也可以快速上手，只要按着教程一步一步来）</strong><br>（💡em…这是一片开源的文章，不收广告费简直了….）<br>Part 2 会稍微讲解一下关于VPN和VPS一些相关知识；<br>想快速上手的，高手们可以跳过这部分。</p>
<h2 id="二、补充基础知识；"><a href="#二、补充基础知识；" class="headerlink" title="二、补充基础知识；"></a>二、补充基础知识；</h2><h3 id="2-1、什么是VPN"><a href="#2-1、什么是VPN" class="headerlink" title="2.1、什么是VPN?"></a>2.1、什么是VPN?</h3><p>💡没有vpn的建议先百度一下….有vpn的谷歌一下….<br>在维基百科上有对VPN做了比较详细的记录：[VPN]<br>简单来说，vpn是架在2台或者以上的主机之间的协议，主要起到加密，为数据提供安全性的保护;<br> 一个实验室里会有vpn，一间公司里面也会有vpn，甚至自己在家有几台电脑也可以搭建vpn，但是这里说的是可以带你看看外面世界的vpn;<br> 由于某种原因，普通中国公民无法访问世界互联网，所有VPN在这里就相当于一把梯子，让我们可以看到墙外面的世界。           </p>
<h3 id="2-2、什么是VPS"><a href="#2-2、什么是VPS" class="headerlink" title="2.2、什么是VPS?"></a>2.2、什么是VPS?</h3><p>vps：Virtual Private Server 虚拟专用服务器，这种技术可以把一台服务器划分为很多个互相独立的容器，互不干扰。原理类似于docker，是一台台虚拟机，但是拥有独立的IP，独立操作系统等等，换句话就是一台拥有独立IP的服务器。<br>至于为什么要划分开来，有兴趣的同学去尝试探索虚拟机这一领域，才薄，了解不深；<br>💡拓展：那国内的云服务器，像阿里云，腾讯云和VPS又有什么区别？<br>个人觉得云服务器和VPS在大体上的功能差不多，可以说云服务器和VPS相差不大，但是细分来说，</p>
<ul>
<li>云服务器是把所有的基础服务器和虚拟机的基础服务都虚拟化，做到可以分布式去存储数据和扩展基础的服务； </li>
<li>VPS则是在单独一台服务器上去做一个虚拟的划分，不太可能做到扩展和分布式存储；2.3、VPS的分类有哪些？<br>基础分类有：OpenVZ、KVM、XEM3种，我这里用的是KVM这一类VPS。<br>我这里没有深入了解太多的，推荐一条链接：<a href="https://blog.csdn.net/enweitech/article/details/52910082" target="_blank" rel="noopener">OpenVZ、KVM、Xem</a></li>
</ul>
<h2 id="三、上手操作；"><a href="#三、上手操作；" class="headerlink" title="三、上手操作；"></a>三、上手操作；</h2><h3 id="3-1、购买一台VPS；"><a href="#3-1、购买一台VPS；" class="headerlink" title="3.1、购买一台VPS；"></a>3.1、购买一台VPS；</h3><p>网络上有很多文章去介绍如何购买性价比高的VPS，有参考过不少，像vultr、搬瓦工、host1pust等等….在对比性价比稍高的VPS，然后鉴于万一有时候VPS 突然崩了，手头又没有多余的VPN的时候，这时候就要考虑一下可以在国内链接到国外的VPS官网，em…我是不敢用国内的云服务器….万一哪次被邮件通知警告就不好了🔦。<br>当然也有考虑到支付方式，有挺多现在是支持支付宝支付的。<br>可以在国内连接到VPS官网有vultr、codecone等等…<br>我这里选择的是codecone这里，官网链接：<a href="https://app.cloudcone.com" target="_blank" rel="noopener">https://app.cloudcone.com</a>；<br>而且这个网站很有趣，在VPS相对成熟的情况下，就得看服务了，codecone官网上提供退款的服务，十分人性化，而且我非常喜欢这个网站的风格，哈哈哈哈！<br>接下来是一系列的购买操作；</p>
<h3 id="3-1-1-跳转进入官网，选择自己想要的cpu、内存、硬盘内存等等；"><a href="#3-1-1-跳转进入官网，选择自己想要的cpu、内存、硬盘内存等等；" class="headerlink" title="3.1.1 跳转进入官网，选择自己想要的cpu、内存、硬盘内存等等；"></a>3.1.1 跳转进入官网，选择自己想要的cpu、内存、硬盘内存等等；</h3><p><img src="/static/images/2018-06-22/1.jpeg" alt=""></p>
<p>由于我这里没有用来建站，只是单纯的搭建VPN，所以配置是最低的，换算过来也就<strong>17块左右一个月</strong>，现在外面一杯奶茶都差不多20多了，没钱喝奶茶了。<br>图片有显示一个月有3TB的流量，同时关闭VPS的时候，计费会降到1.11美元，开启的时候才会按照2.67的价格来计费。</p>
<h3 id="3-1-2点击「Deploy-Server」来购买VPS"><a href="#3-1-2点击「Deploy-Server」来购买VPS" class="headerlink" title="3.1.2点击「Deploy Server」来购买VPS;"></a>3.1.2点击「Deploy Server」来购买VPS;</h3><p>购买前提是得要在这个官网充值，最低是5美元，也就是32、33块左右；（支持支付宝支付）<br><img src="/static/images/2018-06-22/2.png" alt=""><br>购买成功之后会出现：<br><img src="/static/images/2018-06-22/3.jpeg" alt=""><br>这样就可以拥有了自己的一台VPS了，好吧，这确实差不多是一杯奶茶的钱了！<br> ⚠️它的密码会通过邮件来寄给你的，所以保存好邮件吧；但是有一个不好的地方就是，没找到自定义密码的地方，每次输入密码都得记得一大串随机码🐛<br> 下面是激动人心的时候了。</p>
<h3 id="3-2、使用终端访问VPS-并且使用ss搭建VPN"><a href="#3-2、使用终端访问VPS-并且使用ss搭建VPN" class="headerlink" title="3.2、使用终端访问VPS,并且使用ss搭建VPN"></a>3.2、使用终端访问VPS,并且使用ss搭建VPN</h3><p>ss是指shadowsocks，是一种机遇socks5代理方式的加密传输协议，分为服务端和客户端，这里我们将要部署的是shadowsocks 的服务端。<br>shadowsocks的安装是有一键安装的，想LAMP一样有着一键安装包；<br>拓展：什么是LAMP? 截图来自我自己的一些笔记哈🦋<br><img src="/static/images/2018-06-22/4.png" alt=""><br>回归正题：<br>使用终端链接VPS，我觉得作为一名程序员无论前端还是后端，会使用终端去编程是必备的一个技能。<br>⚠️⚠️<br>Window系统的话，推荐使用xshell5，亲测用过。<br>Mac系统的话，本机自带有终端，但是推荐使用iterm，好像之前的文章有说过，亲测在用喔。<br>⚠️⚠️<br>拿我来说，我这里使用的mac系统的iterm，所以可以直接使用命令；<br><code>ssh &lt;用户名&gt;@&lt;主机IP&gt;</code></p>
<p>例如我的VPS用户名是 root ，IP地址是 ：123.123.123.123<br>那么就可以如下图；<br><img src="/static/images/2018-06-22/5.jpeg" alt=""><br>直接输入密码即可，登录到远程的VPS了。<br>然后因为使用的codecone的VPS，有必要输入自带的命令；<br><img src="/static/images/2018-06-22/6.png" alt=""></p>
<p>————————————————————————分隔线————————————————————<br>接下来安装shadowsocks的服务端了，这里有一键安装包的。 ⚠️使用终端按照下面的进行：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">wget --no-check-certificate [https:<span class="comment">//raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks.sh](https://raw.githubusercontent.com/teddysun/shadowsocks_install/master/shadowsocks.sh)</span></span><br><span class="line">chmod +x shadowsocks.sh ./shadowsocks.sh <span class="number">2</span>&gt;&amp;<span class="number">1</span> | tee shadowsocks.log</span><br></pre></td></tr></table></figure></p>
<p>会出现一系列的让你输入信息的步骤；<br>⚠️<strong>这里我忘记截图了！忘记截图了！截图了！图了！</strong>🙈🙈🙈🙈🙈🙈<br>不过因为是一键安装的，所以步骤相对简单，能看懂英文就可以继续往下走了；</p>
<ul>
<li>1、输入密码；</li>
<li>2、默认端口；        </li>
<li>3、选择加密方式        </li>
<li>4、生成信息：</li>
</ul>
<p><img src="/static/images/2018-06-22/7.png" alt=""><br>其实到了这里，服务端的shadowsocks已经安装完成了；</p>
<p><strong>等待安装客服端就可以连接上VPN，可以开始浏览墙外的世界了；</strong></p>
<h2 id="四、遇到的坑、测试和优化。"><a href="#四、遇到的坑、测试和优化。" class="headerlink" title="四、遇到的坑、测试和优化。"></a>四、遇到的坑、测试和优化。</h2><p><strong>坑1：做到这里，我先ping了一下我的VPS。</strong><br><img src="/static/images/2018-06-22/8.png" alt=""><br>16%的丢包率还行了；<br>好吧，继续找方法来提高连接的稳定性，发现需要修改<strong>TCP Fast Open</strong> 的配置；</p>
<p><strong>这里有个小坑：我用vim去修改不行了，但是发现可以使用 nano ，果断使用nano来作为修改。</strong><br>这里是一个小教程：</p>
<h3 id="第一步："><a href="#第一步：" class="headerlink" title="第一步："></a>第一步：</h3><p><code>nano /etc/rc.local</code><br>修改成：<br><img src="/static/images/2018-06-22/9.png" alt=""></p>
<h3 id="第二步："><a href="#第二步：" class="headerlink" title="第二步："></a>第二步：</h3><p><code>nano /etc/sysctl.conf</code><br>修改成：<br><img src="/static/images/2018-06-22/10.png" alt=""></p>
<h3 id="第三步："><a href="#第三步：" class="headerlink" title="第三步："></a>第三步：</h3><p><code>nano /etc/shadowsocks.json</code></p>
<p>主要修改红线框框住的部分：<br><img src="/static/images/2018-06-22/11.png" alt=""><br>这里我打马赛克的是我添加了多用户，可以通过不同接口和不同密码来接入VPS，主要是给家里人尝试用一下；<br>格式像上图一样，</p>
<blockquote>
<p>1、只是把server_port 去掉；<br>2、添加如下的多用户格式： “port_password”:{ “&lt;端口号&gt;”：”密码” }</p>
</blockquote>
<p>这里要原本使用iptables命令来重启，centro6版本以下都有这个命令，是一个防火墙；<br>但是我发现没有iptable-service的服务…..我发现我的版本明明是6.x；</p>
<p><strong>坑2：我得去安装iptables-service</strong><br>只有iptables，而没有iptables-service，岂不是默认防火墙是firewalle！？</p>
<p>先查询iptables的状态<br><code>service iptables status</code></p>
<p>我发现已经是iptables是有的，然后试着安装iptables-service<br><code>yum install iptables-services</code></p>
<p>然后我要使iptabes生效的，我得先必须停止或者禁用默认防火墙；<br><code>systemctl mask firewalld</code></p>
<p>启动iptables服务：<br><code>systemctl start iptables.service</code></p>
<p>接下来应该是重新启动iptables和ss，但是由于我之前配置了好几个端口，现在没有生效，所以我现在需要做的是：给iptables添加新的端口，再让他们重启生效。<br><code>iptables -A INPUT -p tcp --dport &lt;端口号&gt; -j ACCEPT</code></p>
<p>保存iptables设置和重启：<br><code>service iptables save</code><br><code>systemctl restart iptables.service</code></p>
<p>重启ss:</p>
<p><code>/etc/init.d/shadowsocks restart</code></p>
<p>OK，到这里，还可以进行进一步的优化，像安装锐速之类的来提升速度，鉴于在找锐速的过程中，返现锐速网址打不开和停产之后，也没去找其他的方案，觉得现在还行，以后可以来优化一下。  </p>
<h2 id="五、安装客户端"><a href="#五、安装客户端" class="headerlink" title="五、安装客户端"></a>五、安装客户端</h2><p>ss的客户端就是安装在终端上的shadowsocks之类的，各种IP代理服务.</p>
<p>⚠️⚠️这里我从shadowsocks官网摘下来的一些各种终端下载地址</p>
<blockquote>
<p> Windows &gt; 客戶端下載 <a href="https://portal.shadowsocks.la/files/Shadowsocks-4.0.6.zip%E2%80%A8%E6%B3%A8%EF%BC%9A%E9%9C%80%E8%A6%81%E5%AE%89%E8%A3%9D" target="_blank" rel="noopener">https://portal.shadowsocks.la/files/Shadowsocks-4.0.6.zip&gt; 注：需要安裝</a> .NET FrameWork 4.6.2 以上版本<br> iOS &gt; 相關客戶端與使用方法請參考下述鏈接：&gt; <a href="https://github.com/Shadowsocks-Wiki/shadowsocks/blob/master/4-ios-settings.md" target="_blank" rel="noopener">https://github.com/Shadowsocks-Wiki/shadowsocks/blob/master/4-ios-settings.md</a><br> MAC OS &gt; 請更新到 ShadowsocksX-NG 使用&gt; 下載地址： <a href="https://portal.shadowsocks.la/files/ShadowsocksX-NG.1.6.1.zip" target="_blank" rel="noopener">https://portal.shadowsocks.la/files/ShadowsocksX-NG.1.6.1.zip</a><br> Android下載地址 &gt; 下載地址： <a href="https://portal.shadowsocks.la/files/shadowsocks-nightly-4.2.5.zip" target="_blank" rel="noopener">https://portal.shadowsocks.la/files/shadowsocks-nightly-4.2.5.zip</a><br>Linux用戶 &gt; 請使用最新的 Shadowsocks-libev 命令行版本&gt; 安裝與使用請參考：<a href="https://github.com/shadowsocks/shadowsocks-libev" target="_blank" rel="noopener">https://github.com/shadowsocks/shadowsocks-libev</a></p>
</blockquote>
<p>我这里PC用的是mac的ss代理：<br><img src="/static/images/2018-06-22/12.png" alt=""></p>
<p>手机用的是superwingy这个代理服务：<br><img src="/static/images/2018-06-22/13.png" alt=""></p>
<p>这是PC和手机访问 youtobe.com的效果；<br><img src="/static/images/2018-06-22/14.png" alt=""><br><img src="/static/images/2018-06-22/15.png" alt="">      </p>
<h3 id="六、总语"><a href="#六、总语" class="headerlink" title="六、总语"></a>六、总语</h3><p>💡关于科学上网的分享就是这么多，觉得不错的就可以点个赞喔！<br>💡发现有不妥的地方可以指出来，会进行修改哈！<br>富强、民主、文明、和谐<br>自由、平等、公正、法治<br>爱国、敬业、诚信、友善<br>欢迎请喝奶茶～哈哈哈哈～ </p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/科学上网/">科学上网</a>
    </span>
    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/VPS/">VPS</a><a href="/tags/实用技巧/">实用技巧</a>
    </span>
    

    </div>

    
  </div>
</article>


    </main>

    <footer class="site-footer">
  <p class="site-info">
    博主github <a href="https://github.com/heycqing" target="_blank">heycqing</a> 
    <br>
    
    &copy; 2018 Cqing
    
  </p>
</footer>
    
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-129505375-1', 'auto');
    ga('send', 'pageview');

</script>

  </div>
</div>
<script src="/blog/js/components/header.js"></script>
</body>
</html>