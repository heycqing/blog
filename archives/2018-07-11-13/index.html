<!DOCTYPE HTML>
<html>
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="utf-8">
  
  <title>LocalStorage &amp; SessionStorage | Cqing 博客</title>

  
  <meta name="author" content="Cqing">
  

  
  <meta name="description" content="​Localstorage 和 SessionStorage 是Html5的一个新特性，属于Html5里的本地离线存储。
​在讨论这两个之前我们先科普一下关于html5相关知识。">
  

  
  <meta name="keywords" content="heycqing,cqing,伍思卿,前端学习,北京理工大学珠海学院，wusiqingss">
  

  <meta id="viewport" name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">

  <meta property="og:title" content="LocalStorage &amp; SessionStorage">

  <meta property="og:site_name" content="Cqing 博客">

  
  <meta property="og:image" content="/favicon.ico">
  

  <link href="/favicon.ico" rel="icon">
  <link rel="alternate" href="/atom.xml" title="Cqing 博客" type="application/atom+xml">
  <link rel="stylesheet" href="//css/style.css" media="screen" type="text/css">
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=UA-129505375-1"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'UA-129505375-1');
  </script>
  <script>
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?1089516899016647991a2880ca17adff";
      var s = document.getElementsByTagName("script")[0]; 
      s.parentNode.insertBefore(hm, s);
    })();
    </script>
</head>


<body>
<div class="blog">
  <div class="content">

    <header id="cqing-header">
  <div class="site-branding">
    <h1 class="site-title">
      <a href="/">Cqing 博客</a>
    </h1>
    <p class="site-description"></p>
  </div>
  <nav class="site-navigation">
    <ul>
      
        <li><a href="/">主页</a></li>
      
        <li><a href="/blog/archives">文章列表</a></li>
      
        <li><a href="/categories">文章分类</a></li>
      
    </ul>
  </nav>
</header>

    <main class="site-main posts-loop">
    <article>

  
    
    <h3 class="article-title"><span>LocalStorage &amp; SessionStorage</span></h3>
    
  

  <div class="article-top-meta">
    <span class="posted-on">
      <a href="/blog/archives/2018-07-11-13/" rel="bookmark">
        <time class="entry-date published" datetime="2018-07-11T05:16:32.000Z">
          2018-07-11
        </time>
      </a>
    </span>
  </div>


  

  <div class="article-content">
    <div class="entry">
      
        <p>​Localstorage 和 SessionStorage 是Html5的一个新特性，属于Html5里的本地离线存储。</p>
<p>​在讨论这两个之前我们先科普一下关于html5相关知识。<br><a id="more"></a></p>
<h2 id="科普Html5"><a href="#科普Html5" class="headerlink" title="科普Html5"></a>科普Html5</h2><p>​ 其实我们都知道HTML是一种标记语言，属于SGML的一种，但是HTML5已经不属于标记语言【SGML】的范围内了，在近几年HTML5出现之后，本身自己添加了不少的功能。 ​ HTML5新增的功能：</p>
<ul>
<li>画布绘画标签 canvas；</li>
<li>媒体流标签 video 和 audio (视频和音频)；</li>
<li>本地离线储存 localStorage 和 sessionStorage；</li>
<li>更语义化的元素 例如footer、header、article等等；</li>
<li>表单控件： time、email、url、date等等；</li>
<li>新技术：websocket(实时通信)、webWorker(针对js主线程另开一个线程)、geolocation(地理位置对象)；</li>
</ul>
<p>​ 在对于HTML5的支持肯定，各个厂商的浏览器支持是不一样的，我们可以从下面表看一下。 ​ <strong>HTML5的表单控件：</strong> <img src="/static/images/2018-07-11-13/1.png" alt=""> ​  ​ <strong>HTML5的新语义化元素：</strong> <img src="/static/images/2018-07-11-13/2.png" alt=""> ​  ​ <strong>HTML5的video标签：</strong> <img src="/static/images/2018-07-11-13/3.png" alt=""> ​ 看了一些浏览器的兼容的情况之后，接下来就是看一下关于浏览器存储的兼容： ​ <strong>Web Storage:</strong>  <img src="/static/images/2018-07-11-13/4.png" alt=""> ​<br>可以看出还是存在bug的，尤其是IE浏览器和IOS。   ​<br><strong>QQ浏览器</strong> ​ 这里说多一句，基于现在微信流量吓人的时代，开发的相关很多网页大多是都是放在微信内置的浏览器打开的，也就是QQ浏览器，而QQ浏览器之前是双核浏览器，也就是2个内核，即Webkit和Trident双内核，Chrome和IE浏览器分别使用的内核，但是细分的话，Webkit是谷歌开源的内核Chromium（<a href="https://zh.wikipedia.org/wiki/File:Chromium_Material_Icon-256x256.png" target="_blank" rel="noopener"><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/2/24/Chromium_Material_Icon-256x256.png/18px-Chromium_Material_Icon-256x256.png" alt=""></a>），而不是 Google 代表色的（<img src="/static/images/2018-07-11-13/6.png" alt="">）,简单来说，QQ浏览器是基于Chromium开发，针对IE内核优化。 ​ 所以也可以看做是chrome浏览器一类，然后去兼容IE的弊端，一听就很霸气，哈哈，当然也可以使用官方的开发者工具开发，毕竟是官方的，真机模拟和实际真机问题不大。</p>
<h2 id="HTML5-和-H5-的区别"><a href="#HTML5-和-H5-的区别" class="headerlink" title="HTML5 和 H5 的区别?"></a>HTML5 和 H5 的区别?</h2><p>​ 这个问题在知乎已经有很多人做了回答，可以点击下面的链接： ​ 知乎链接：<a href="https://www.zhihu.com/question/30363342" target="_blank" rel="noopener">https://www.zhihu.com/question/30363342</a> ​ ​<br>其实在H5刚出来的时候，身边是一股潮流风，被其他营销手段，吹的天花乱坠，还有的是说某大学生，用H5制作软件制作了一个企业H5，赚了上百万…….人人跟风，以为是新东西，感觉是掌握了H5就掌握了世界的感觉。当时大二的时候还有一个找我做H5的，说要做一个这样的东西，你只需要什么什么就行….然后就没了，途中有试过解释什么是H5是一个技术集合，如果你想要这样拖拉一下组件，加加文字，你直接可以去用易企秀、Maka类似的H5制作软件就行了…. ​ 其实跟不跟风这回事….你可以上网查一下，就可以对H5有一个大概的了解。 ​<br><img src="/static/images/2018-07-11-13/7.gif" alt=""><br>  ​<br>所以在我看来，HTML5 和 H5 ，角度不一样，说法就不一样，营销、技术的角度不一样，说法就不一样，如果真想来了解两者的对比，可以看一下我放的链接，里面说的很清楚了，但是，我想说的是，在一件新事物出现之后，我们应当先冷静一下，看看它究竟是什么，适用在什么场景，再去学习理解，化为己用。 ​ 做项目的时候，也有技术选型嘛，道理是一样的。  ​ 前端娱乐圈发展快，越快越需要自己冷静下来，看个究竟，再做选择。  </p>
<h2 id="回归主题，基本概念"><a href="#回归主题，基本概念" class="headerlink" title="回归主题，基本概念"></a>回归主题，基本概念</h2><h3 id="LocalStorage："><a href="#LocalStorage：" class="headerlink" title="LocalStorage："></a>LocalStorage：</h3><p>​ Html5的新特性，本地存储的长期存储，当浏览器关闭数据不会丢失。​ ​ 大小一般是5M左右，方便存储大量的信息，但是最好不要在本地浏览器存储敏感信息。 ​ 数据格式是以键值对存在，即 <code>key — value</code> 。</p>
<h4 id="LocalStorage使用方法："><a href="#LocalStorage使用方法：" class="headerlink" title="LocalStorage使用方法："></a>LocalStorage使用方法：</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置本地LocalStorage数据；</span></span><br><span class="line">LocalStorage.setItem(key, value) </span><br><span class="line">​</span><br><span class="line"><span class="comment">//获取本地LocalStorage数据 key相对应的value；</span></span><br><span class="line">LocalSrorage.getItem(key)</span><br><span class="line">​</span><br><span class="line"><span class="comment">//本地LocalStorage数据  根据key移除；</span></span><br><span class="line">LocalStorage.removeItem(key)</span><br><span class="line">​</span><br><span class="line"><span class="comment">//本地LocalStorage数据 全部移除</span></span><br><span class="line">LocalStorage.clear()</span><br></pre></td></tr></table></figure>
<p>​ 有写demo代码：<br><img src="/static/images/2018-07-11-13/8.png" alt="">   ​<br>可以在打开的浏览器看到： ​<br><img src="/static/images/2018-07-11-13/9.png" alt=""> ​  ​<br>可以看到浏览器里的 <code>Application</code> 控制面板，可以看到对应的web存储，红线框即是。 ​ 在这里有个动效就是，当你点击按钮的时候，里面的名字是会改变成，存储在localStorage里的value。 ​<br><img src="/static/images/2018-07-11-13/10.gif" alt="">    </p>
<h3 id="SessionStorage"><a href="#SessionStorage" class="headerlink" title="SessionStorage:"></a>SessionStorage:</h3><p>​ 也是Html5的新特性，本地存储的暂时性存储，不会被长期存储，当浏览器或者当前窗口被关闭时，sessionStorage存储的数据也会被清除。数据格式和用法和LocalStorage都很像。 ​ 数据格式是以键值对存在，即 key — value 。  </p>
<h4 id="SessionStorage使用方法："><a href="#SessionStorage使用方法：" class="headerlink" title="SessionStorage使用方法："></a>SessionStorage使用方法：</h4><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//设置本地LocalStorage数据；</span></span><br><span class="line">SessionStorage.setItem(key, value) </span><br><span class="line">​</span><br><span class="line"><span class="comment">//获取本地LocalStorage数据 key相对应的value；</span></span><br><span class="line">SessionSrorage.getItem(key)</span><br><span class="line">​</span><br><span class="line"><span class="comment">//本地LocalStorage数据  根据key移除；</span></span><br><span class="line">SessionStorage.removeItem(key)</span><br><span class="line">​</span><br><span class="line"><span class="comment">//本地LocalStorage数据 全部移除</span></span><br><span class="line">SessionStorage.clear()</span><br></pre></td></tr></table></figure>
<p>  Localstorage 和 sessionStorage的作用域 其实在概念的时候，就会明白sessionStorage在当前窗口关闭的时候，里面的数据就会丢掉，LocalStorage是可以长期存储的，但是他怎么样存储起来的？这么多网站会不会搞乱？ ​ 来张图： ​<br> <img src="/static/images/2018-07-11-13/11.png" alt=""> ​    </p>
<p>可以在上图可以看到:</p>
<ul>
<li>LocalStorage只有满足 <code>协议</code> <code>主机名</code> <code>端口</code> ，才能辨别出到底是谁存储了这些数据； </li>
<li>SessionStorage则还要满足<code>当前窗口</code>才可以辨别；只有满足以上的作用域，才可以读取相对应的存储信息。  </li>
</ul>
<h4 id="如何证明真的是这样的？"><a href="#如何证明真的是这样的？" class="headerlink" title="如何证明真的是这样的？"></a>如何证明真的是这样的？</h4><p>​ 我做了一个对于LocalStorage的一个存储例子。 ​ demo网址：</p>
<ol>
<li><p><a href="http://www.wusiqing.com/webTest/localStorage/local_index.html" target="_blank" rel="noopener">http://www.wusiqing.com/webTest/localStorage/local_index.html</a></p>
</li>
<li><p><a href="http://www.wusiqing.com/webTest/localStorage/index.html" target="_blank" rel="noopener">http://www.wusiqing.com/webTest/localStorage/index.html</a></p>
</li>
<li><p><a href="http://wusiqing.com/webTest/testTest/index.html">http://wusiqing.com/webTest/testTest/index.html</a></p>
</li>
</ol>
<p>​ 其中，第一，第二是同在LocalStorage文件夹下的，而第三个则不是。</p>
<h5 id="对比一下第一、第三："><a href="#对比一下第一、第三：" class="headerlink" title="对比一下第一、第三："></a>对比一下第一、第三：</h5><p>![]/static/images/2018-07-11-13/12.gif)  </p>
<h5 id="对比第一、第二"><a href="#对比第一、第二" class="headerlink" title="对比第一、第二"></a>对比第一、第二</h5><p><img src="h/static/images/2018-07-11-13/13.gif" alt="">  </p>
<h5 id="结论"><a href="#结论" class="headerlink" title="结论:"></a>结论:</h5><p>事实证明是除了在上面说的协议、主机名、端口之外，还要在同一资源下，即在同一个设置好LocalStorage文件的文件夹下的所有页面才会起作用。    </p>
<h3 id="随处可见的cookie"><a href="#随处可见的cookie" class="headerlink" title="随处可见的cookie"></a>随处可见的cookie</h3><p>​ 在讲到本地存储的时候，除了LocalStorage和SessionStorage，肯定回想起来很熟悉的Cookie。  </p>
<h4 id="​-Cookie是什么？"><a href="#​-Cookie是什么？" class="headerlink" title="​ Cookie是什么？"></a>​ Cookie是什么？</h4><p>cookie也是一个本地存储，是服务器发送给浏览器并保存在本地的一个4k数据信息，它会在下一次浏览器向同一服务器发送http请求的时候附带上，主要用来检验是否是同一信息。 简单来说，cookie由服务器发送，在http上传播，保存在本地浏览器中。</p>
<h4 id="Cookie能干什么？"><a href="#Cookie能干什么？" class="headerlink" title="Cookie能干什么？"></a>Cookie能干什么？</h4><p>主要是存储信息，便于服务器和浏览器之间会话通信。 平时最常用的登录状态管理和之前购物车的使用都是基于cookie，后来购物车就可以使用localstorage来作为客户端的存储。 使用场景主要是：</p>
<ul>
<li><p>会话状态管理（登录、购物车等）</p>
</li>
<li><p>个性化定制（用户自定义设置）</p>
</li>
<li><p>用户行为信息</p>
</li>
</ul>
<h4 id="Cookie如何看到"><a href="#Cookie如何看到" class="headerlink" title="Cookie如何看到"></a>Cookie如何看到</h4><h5 id="控制台查看"><a href="#控制台查看" class="headerlink" title="控制台查看"></a>控制台查看</h5><p>可以直接在这里可以查看：</p>
<p><img src="/static/images/2018-07-11-13/14.png" alt="">  </p>
<h5 id="原生js-API查看"><a href="#原生js-API查看" class="headerlink" title="原生js API查看"></a>原生js API查看</h5><p>可以使用 <code>document.cookie</code> (但是如果cookie设置了httpOnly属性，就无法使用js查看)；</p>
<p>如下图： <img src="/static/images/2018-07-11-13/15.png" alt="">    </p>
<h4 id="Cookie的设置。"><a href="#Cookie的设置。" class="headerlink" title="Cookie的设置。"></a>Cookie的设置。</h4><h5 id="常规操作后端操作"><a href="#常规操作后端操作" class="headerlink" title="常规操作后端操作"></a>常规操作后端操作</h5><p>cookie是由服务端设置的，然后发送到浏览器。 使用操作是： <code>Set-Cookie: &lt;cookie名&gt;=&lt;cookie值&gt;</code></p>
<p>类似的如同在nodeJs上操作是：</p>
<p>使用响应属性去设置头部信息。</p>
<p><img src="/static/images/2018-07-11-13/16.png" alt=""></p>
<h5 id="控制台操作"><a href="#控制台操作" class="headerlink" title="控制台操作"></a>控制台操作</h5><p>可以在各个浏览器的开发者工具中的 <code>Appication</code>标签可以看到，也可以直接进行修改。</p>
<p><img src="/static/images/2018-07-11-13/17.png" alt=""></p>
<h5 id="原生js操作"><a href="#原生js操作" class="headerlink" title="原生js操作"></a>原生js操作</h5><p>原生js操作其实和控制台操作差不多，作为api，其实就是在操作浏览器的相关内容。 前面有说过，可以使用 <code>document.cookie</code> 进行查看当前浏览器的cookie，那么也是可以进行修改， 语法： <code>document.cookie=&#39;&lt;key&gt;=&lt;value&gt;&#39;</code></p>
<p>例如：</p>
<p><code>document.cookie=&#39;name=cqing&#39;;</code>    </p>
<h4 id="Cookie属性"><a href="#Cookie属性" class="headerlink" title="Cookie属性"></a>Cookie属性</h4><ul>
<li><p>Domain 设置域名和主机名，表示要发送到哪个服务器。</p>
</li>
<li><p>path 设置路径，和Domain一起使用，表示发送到改服务器下的具体哪一个路径。</p>
</li>
<li><p>Expirse | Max-Age 设置过期时间，表示在这个时间之前是有效的。</p>
</li>
<li><p>secure 设置只有在安全协议之下cookie才可以被使用，默认为空。</p>
</li>
<li><p>httpOnly 设置能否使用js查看，默认为空。</p>
</li>
</ul>
<p><img src="/static/images/2018-07-11-13/18.png" alt="">  </p>
<h3 id="除了以上说的三种方式之外，Html5还新增了关于本地数据库的功能"><a href="#除了以上说的三种方式之外，Html5还新增了关于本地数据库的功能" class="headerlink" title="除了以上说的三种方式之外，Html5还新增了关于本地数据库的功能."></a>除了以上说的三种方式之外，Html5还新增了关于本地数据库的功能.</h3><p>在写的过程中，发现有点偏离主题，关于本地数据库操作，可以自行搜索相关的语言操作demo.</p>
<h4 id="本地存储-SQLite"><a href="#本地存储-SQLite" class="headerlink" title="本地存储 SQLite"></a>本地存储 SQLite</h4><p>除了以上说的三种方式之外，Html5还新增了关于本地数据库的功能，但是本地数据库操作并不是Html5里面的新特性，只是一种借用了Sql对本地数据库操作的apis，即web SQLlite 和 Web indexedDB 。 其实web SQL现在chrome支持得更多，其他浏览器像IE、火狐等等的就不要支持了。</p>
<p>它的语法其实和sql语句差不多，详细可以自己了解一下，这里不做详细展示了。</p>
<p>看图</p>
<p><img src="/static/images/2018-07-11-13/19.png" alt=""></p>
<h4 id="本地存储-web-indexedDB"><a href="#本地存储-web-indexedDB" class="headerlink" title="本地存储 web indexedDB"></a>本地存储 web indexedDB</h4><p>相对于web SQL ，web indexedDB更广泛被支持。</p>
<p>看图：</p>
<p><img src="/static/images/2018-07-11-13/20.png" alt=""></p>
<h2 id="结语"><a href="#结语" class="headerlink" title="结语"></a>结语</h2><p>  在后面关于本地数据库操作介绍的有点简单，因为在写的时候，经常性会不自觉地想到很多，本来只想简单谢谢sessionStorage和localStorage这两个东西，但是后来不自不觉就写到了本地存储，也有另外相关知识的拓展和衍生，希望还是可以写一点这样子。</p>
<p>觉得不错的，可以点个赞，赞赞更有动力哈！</p>
<p>​</p>

      
    </div>

  </div>

  <div class="article-footer">
    <div class="article-meta pull-left">

    
      

    <span class="post-categories">
      <i class="icon-categories"></i>
        <a href="/categories/前端/">前端</a>
    </span>
    

    
    

    <span class="post-tags">
      <i class="icon-tags"></i>
        <a href="/tags/前端小技巧/">前端小技巧</a>
    </span>
    

    </div>

    
  </div>
</article>


    </main>

    <footer class="site-footer">
  <p class="site-info">
    博主github <a href="https://github.com/heycqing" target="_blank">heycqing</a> 
    <br>
    
    &copy; 2018 Cqing
    
  </p>
</footer>
    
<script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
                (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
            m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-129505375-1', 'auto');
    ga('send', 'pageview');

</script>

  </div>
</div>
<script src="/blog/js/components/header.js"></script>
</body>
</html>